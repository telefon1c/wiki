---
visibility: hidden
order: -5
---

# Публикация информационной базы на веб-сервере
Предварительно необходимо установить и настроить веб-сервер Apache или IIS (подробные инструкции можно найти <a href='https://its.1c.ru/db/v8312doc#bookmark:adm:TI000000194' target="_blank">на портале 1C:ИТС.</a> <br> 
Мы используем <a href='https://infostart.ru/public/646384/' target="_blank">инструкцию с инфостарта.</a> <br>
О настройке защищенного соединения можно прочитать <a href='https://its.1c.ru/db/metod8dev/content/5978/hdoc' target="_blank">здесь.</a>

Не забудьте настроить правила брандмауэра:
- для АТС MikoPBX правило входящее на **80** порт;
- для АТС Манго правило входящее на **80, 4222, 8222** портах.

## Опубликуйте веб-сервис:
1. Запустите конфигуратор вашей информационной базы "от имени администратора".
2. Откройте окно настройки публикации на веб-сервере, **Администрирование → Публикация на веб-сервере**.
3. Укажите имя публикации, под которым будет доступна информационная база (например, base1c). Имя следует указывать латиницей.
На вкладке Web-сервисы установите флажок напротив **Публиковать Web-сервисы расширений по умолчанию**.

<img class="miko-shadow"  
    src="/assets/root-guides/base-publishing/publikacija_bazy.png"
    alt="МИКО: публикация информационной базы"
/> 

4. Нажмите **Опубликовать** и согласитесь на вопрос о перезапуске веб-сервера.

## Настройте права доступа к веб-сервису
!!! Если вы используете подсистему телефонии 2.2 или 4.0 
То данный раздел проделывать не нужно, пользователь уже присутствует в конфигурации. Он добавляется автоматически при установке расширения.
!!!

Создайте служебного пользователя, от имени которого будет выполняться подключение АТС к информационной базе:
1. Откройте в конфигураторе список пользователей, **Администрирование → Пользователи**.
2. Нажмите **Добавить**.
3. Укажите имя нового пользователя (например, WebService). Имя следует указывать латиницей.
4. Введите произвольный пароль. Сохраните его, он понадобиться позже.
5. Снимите флажок **Показывать в списке выбора**.
 
<img class="miko-shadow"  
    src="/assets/root-guides/base-publishing/publ_0.png"
    alt="МИКО: создание служебного пользователя"
/>  

6. На вкладке Прочие установите флажок напротив ролей
- **Телефония: Базовые права**,
- **Телефония: Веб сервисы**.

<img class="miko-shadow"  
    src="/assets/root-guides/base-publishing/publ_1.png"
    alt="МИКО: создание служебного пользователя"
/>  

7. Нажмите **ОК** для сохранения изменений.

## Проверьте подключение
Необходимо проверить, что веб-сервер готов принимать обращения к опубликованному веб-сервису:

1. Откройте браузер на странице вида
`http://[АдресСервера]/[ИмяПубликации]/ws/miko_crm_api.1cws?wsdl`  
Для текущего примера ссылка будет иметь вид `http://127.0.0.1/base1c/ws/miko_crm_api.1cws?wsdl`.  
2. На запрос авторизации укажите имя и пароль служебного пользователя, который был создан на предыдущем шаге.  
3. Если все в порядке, то на экране будет сообщение:
`Не указан заголовок управления сеансами или куки с идентификатором сеанса.`
Оно говорит, что все в порядке, включен режим повторного использования сеансов для повышения быстродействия в работе веб-сервиса.  
Вместо сообщения возможно отображение XML представление веб-сервиса.

<img class="miko-shadow"  
    src="/assets/root-guides/base-publishing/publ_2.png"
    alt="МИКО: проверка работы веб-сервиса"
/> 
